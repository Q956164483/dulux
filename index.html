<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
    <head>
        <title>多乐士</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
        <!-- <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0"> -->
        <link href="http://cdn.bootcss.com/fullPage.js/2.8.1/jquery.fullPage.css" rel="stylesheet">
        <link href="css/index.css" rel="stylesheet">
        <link rel="stylesheet" href="css/weui.min.css"/>
    </head>
    <body  ontouchstart>
        <div style="position: fixed;z-index: 9999;display: none" id="mask">
            <div class="weui_mask_transparent weui_mask" ></div>
        </div>
        <div class="bmg1 bg_music rote" id="music"></div>
        <audio id="audio" src="music/1.mp3"  loop></audio>
        <div class="main_content ">
            <div id="fullpage">
                <div class="section section1 bg1 bmg1 ">  
                     <div class="bmg1 pos_abs logo"></div>
                     <div class="bmg1 pos_abs foot"></div>
                     <div class="cloud bmg1 pos_abs"></div>
                     <div class="cloud_big bmg1 pos_abs trans_duration"></div>
                     <div class="star1 star_animate ico_star pos_abs bmg1"></div>
                     <div class="star2 star_animate ico_star pos_abs bmg1"></div>
                     <div class="star3 star_animate ico_star pos_abs bmg1"></div>
                </div>
                <div class="section section2  bmg1 bg2">
                     <div class="bmg1 pos_abs logo"></div>
                     <div class="bmg1 pos_abs foot"></div>
                    <div class="trans_duration page2_txt bmg1 pos_abs"></div>
                    <div class="earth pos_abs bmg1">
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag2"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag1"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag1"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag2"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag1"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag2"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag1"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag1"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag2"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag2"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag1"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag2"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag1"></div>
                        </div>
                        <div class="ico_tag  pos_abs">
                            <div class="pos_abs bmg1 ico_tag2"></div>
                        </div>
                    </div>
                </div>
                <div class="section section3  bmg1 bg3">
                     <div class="bmg1 pos_abs logo"></div>
                     <div class="bmg1 pos_abs foot"></div>
                    <div class="trans_duration page3_txt bmg1 pos_abs"></div>
                    <div class="p3_content pos_abs">
                        <div class="p3_tag1 pos_abs bmg1 p3_tag"></div>
                        <div class="p3_tag2 pos_abs bmg1 p3_tag"></div>
                        <div class="p3_tag3 pos_abs bmg1 p3_tag"></div>
                    </div>
                </div>
                <div class="section section4 bmg1 bg4">
                     <div class="bmg1 pos_abs logo"></div>
                     <div class="bmg1 pos_abs foot"></div>
                    <div class="trans_duration page4_txt bmg1 pos_abs"></div>
                    <div class="p4_content pos_abs">
                        <div class="p4_item pos_abs p4_item1 bmg1">
                            <div class="p4_tag p4_tag1 pos_abs  bmg1"></div>
                        </div>
                        <div class="p4_item pos_abs p4_item2 bmg1">
                            <div class="p4_tag p4_tag2 pos_abs  bmg1"></div>
                        </div>
                        <div class="p4_item pos_abs p4_item3 bmg1">
                            <div class="p4_tag p4_tag3 pos_abs  bmg1"></div>
                        </div>
                    </div>
                </div>
           
            <div class="section section5 bg5 bmg1">
                <div class="bmg1 pos_abs logo"></div>
                <div class="bmg1 pos_abs foot"></div>
               <div class="page5_txt bmg1 pos_abs"></div>
               <div class="img">
                    <div class="icon  pos_abs bmg1"></div>
                    <div class="icon  pos_abs bmg1"></div>
                    <div class="icon  pos_abs bmg1"></div>
                    <div class="icon  pos_abs bmg1"></div>
                    <div class="icon  pos_abs bmg1"></div>
               </div> 
            </div>
            <div class="section section6 bg6 bmg1">
                <div class="bmg1 pos_abs logo"></div>
                <div class="bmg1 pos_abs foot"></div>
                <div class="trans_duration page6_txt bmg1 pos_abs"></div>
                <div class="tagBounce page6_txt_18 bmg1 pos_abs"></div>
                <div class="zhexian pos_abs bmg1">
                    <div class="icon_tag  pos_abs bmg1"></div>
                    <div class="icon_tag  pos_abs bmg1"></div>
                    <div class="icon_tag  pos_abs bmg1"></div>
                    <div class="icon_tag  pos_abs bmg1"></div>
                    <div class="icon_tag  pos_abs bmg1"></div>
                    <div class="icon_tag  pos_abs bmg1"></div>
                    <div class="icon_tag  pos_abs bmg1"></div>
                    <div class="icon_tag  pos_abs bmg1"></div>
                    <div class="icon_tag  pos_abs bmg1"></div>
                    <div class="icon_tag  pos_abs bmg1"></div>
                </div>
            </div> 
            <div class="section section7 bg7 bmg1">
                <div class="bmg1 pos_abs logo"></div>
                <div class="bmg1 pos_abs foot"></div>
              <div class="page7_txt bmg1 pos_abs"></div>
              <div class="img">
                    <div class="icon  pos_abs bmg1"></div>
                    <div class="icon  pos_abs bmg1"></div>
                    <div class="icon  pos_abs bmg1"></div>
                    <div class="icon  pos_abs bmg1"></div>
                    <div class="icon  pos_abs bmg1"></div>
               </div> 
            </div>
            <div class="section section8 bg8 bmg1" id="select8">
               <div class="bmg1 pos_abs logo"></div>
               <div class=" bmg1 pos_abs bg8_FL"></div>
               <img src="images/bg8_code.png" class="code bmg1 pos_abs"/>
               <!-- <div class="bg8_code_border bmg1 pos_abs"></div>
               <div class="code bmg1 pos_abs"></div> -->
            </div>
          </div>
        </div>
        
        <script src="http://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
        <script src="http://cdn.bootcss.com/fullPage.js/2.8.1/jquery.fullPage.min.js"></script>
        <script src="js/index.js"></script>
    </body>
    <script>
    $(function(){   
        loadImage();
        play();
        $('#fullpage').fullpage({
            'verticalCentered': false,
            'css3': true,
            'anchors': ['page1', 'page2', 'page3', 'page4','page5','page6','page7','page8'],
            'afterRender':afterRender,
            'afterLoad': afterLoad,
            'onLeave': onLeave
        });  
    });
   
    //图片预加载
    function loadImage() {
        $("#mask").css("display","inline")
        Toast("正在加载，请稍等···");   
        var Aimg = new Array();
        var imgsrc = new Array();
        var AisAllLoad = new Array(57);
        var hasLoadNum = 0;
        for(var m = 0; m < 57; m++){
            AisAllLoad[m] = 1;
        }
        imgsrc[0]="images/p1_bg.png";
         imgsrc[1]="images/p2_bg.png";
          imgsrc[2]="images/p3_bg.png";
           imgsrc[3]="images/p4_bg.png";
            imgsrc[4]="images/bg5.png";
             imgsrc[5]="images/bg6.png";
              imgsrc[6]="images/bg7.png";
               imgsrc[7]="images/bg8.png";
                imgsrc[8]="images/bg5_1.png";
                imgsrc[9]="images/bg5_2.png";
                imgsrc[10]="images/bg5_3.png";
                imgsrc[11]="images/bg5_4.png";
                imgsrc[12]="images/bg5_5.png";
                imgsrc[13]="images/bg5_font.png";
                imgsrc[14]="images/bg6_18.png";
                imgsrc[15]="images/bg6_a1.png";
                imgsrc[16]="images/bg6_a2.png";
                imgsrc[17]="images/bg6_a3.png";
                imgsrc[18]="images/bg6_a4.png";
                imgsrc[19]="images/bg6_a5.png";
                imgsrc[20]="images/bg6_b1.png";
                imgsrc[21]="images/bg6_b2.png";
                imgsrc[22]="images/bg6_b3.png";
                imgsrc[23]="images/bg6_c1.png";
                imgsrc[24]="images/bg6_font_18.png";
                imgsrc[25]="images/bg6_font.png";
                imgsrc[26]="images/bg6_zhexian.png";
                imgsrc[27]="images/bg7_font.png";
                imgsrc[28]="images/bg7_light.png";
                imgsrc[29]="images/bg7_man.png";
                imgsrc[30]="images/bg7_photo.png";
                imgsrc[31]="images/bg7_tv.png";
                imgsrc[32]="images/bg7_yq.png";
                imgsrc[33]="images/bg8_code_border.png";
                imgsrc[34]="images/bg8_code.png";
                imgsrc[35]="images/bg8_shade.png";
                imgsrc[36]="images/bot_arrow.png";
                imgsrc[37]="images/p1_cloud1.png";
                imgsrc[38]="images/p1_cloud2.png";
                imgsrc[39]="images/p2_earth.png";
                imgsrc[40]="images/logo.png";
                imgsrc[41]="images/music.png";
                imgsrc[42]="images/p1_star.png";
                imgsrc[43]="images/p2_tag_blue.png";
                imgsrc[44]="images/p2_tag_red.png";
                imgsrc[45]="images/p2_txt.png";
                imgsrc[46]="images/p3_tag1.png";
                imgsrc[47]="images/p3_tag2.png";
                imgsrc[48]="images/p3_tag3.png";
                imgsrc[49]="images/p3_txt.png";
                imgsrc[50]="images/p4_lander1.png";
                imgsrc[51]="images/p4_lander2.png";
                imgsrc[52]="images/p4_lander3.png";
                imgsrc[53]="images/p4_tag1.png";
                imgsrc[54]="images/p4_tag2.png";
                imgsrc[55]="images/p4_tag3.png";
                imgsrc[56]="images/p4_txt.png";
          var maxNum = imgsrc.length;
          for(var i =0;i < 57; i++){
              Aimg[i] = new Image();
              Aimg[i].src = imgsrc[i]; 
              saveImgMsg(i); 
          }
          function saveImgMsg(index){   
              Aimg[index].onload = function(){
                  hasLoadNum ++ ;
                  checkNum(hasLoadNum);
                  AisAllLoad[index] = 0;
              }
          };
          function checkNum(hasLoadNum){
              if(hasLoadNum == maxNum){
                  //alert('已经全部加载完');
                  $("#mask").css("display","none");
                  closeToast();
                    $('#fullpage').fullpage({
                    'verticalCentered': false,
                    'css3': true,
                    'anchors': ['page1', 'page2', 'page3', 'page4','page5','page6','page7','page8'],
                    'afterRender':afterRender,
                    'afterLoad': afterLoad,
                    'onLeave': onLeave
                });
              }
          }
          //setInterVal(function())
          
    }  
    //在ios手机下，无法自动播发，以下代码用于识别在Ios下自动播放
     document.addEventListener("WeixinJSBridgeReady", function () {  
        play();  
     }, false);       
    function play(){  
        document.getElementById("audio").setAttribute("src","music/1.mp3");  
        document.getElementById("audio").play();   
     }
     //点击音乐
    $("#music").click(function(){ 
       var flag = $(this).hasClass("rote");
       if(flag == true){
          document.getElementById('audio').pause();
          $("#music").removeClass("rote"); 
       }else{
          document.getElementById('audio').play();
          $("#music").addClass("rote"); 
       }
        
    })
    //页面DOM加载完之后
    function afterRender(){
        tagManger.Set();
        tagManger.Clear();
        p5_Manger.Set();
        p5_Manger.Clear();
        p6_Manger.Set();
        p6_Manger.Clear();
        p7_Manger.Set();
        p7_Manger.Clear();
    }

    //进入页面
    function afterLoad(anchorLink , index){
        switch(+index){
            case 1:
                $('.section1 .cloud_big').css({'opacity':1});
                break;
            case 2:
                $('.section2 .page2_txt').css({'opacity':1});
                tagManger.Set();
                break;
            case 3:
                $('.section3 .page3_txt').css({'opacity':1});
                p3_Manger.Set();
                break;   
            case 4:
                $('.section4 .page4_txt').css({'opacity':1});
                p4_Manger.Set();
                break;
            case 5:
                p5_Manger.Set();
                break;
            case 6:
                $('.section6 .page6_txt').css({'opacity':1});
                p6_Manger.Set();
                break; 
            case 7:  
                p7_Manger.Set();
                break; 
            case 8:
                p8_Manger.Set();
                break; 
        }
    }
    //离开页面
    function onLeave(index, nextindex, direction ){
          //console.log(index, nextindex, direction )
          switch(+index){
            case 1:
                $('.section1 .cloud_big').css({'opacity':0})
                break;
            case 2:
                $('.section2 .page2_txt').css({'opacity':0})
                tagManger.Clear();
                break;
            case 3:
                $('.section3 .page3_txt').css({'opacity':0});
                p3_Manger.Clear();
                break;    
            case 4:
                $('.section4 .page4_txt').css({'opacity':0});
                p4_Manger.Clear();
                break;
            case 5:
                p5_Manger.Clear();
                break;
            case 6:
                $('.section6 .page6_txt').css({'opacity':0});
                p6_Manger.Clear();
                break;  
            case 7:
                p7_Manger.Clear();
                break;
            case 8:
                p8_Manger.Clear(); 
                break; 
        }
    }
   
    </script>
</html>